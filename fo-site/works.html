 <table class="worktable"><tr>
    <?php $count = 0; 
    foreach($result as $r)
    {
        $count++; ?>
        <!-- для каждого дела вставить картинку из .img, добавить надпись из .name -->
        <td><table class="workinnertable"><tr><td><a class="acentered" href="<?=$r['url'] ?>"><img class="preview-img" src="<?=$r['pic'] ?>"></a></td></tr>
        <tr><td><a class="acentered" class="workurl" href="<?=$r['url']?>"><?=$r['name']?></a></td></tr>
        <!-- и нарисовать два прогрессбара: один с деньгами с процентом из .moneygot/.moneyneed -->
        <?php $wpercent = $r['moneygot'] / $r['moneyneed'] * 100; ?>
        <tr><td><div class="workprogress"><div class="workbar" id="wb<?=$count?>"></div></div>Собрано <?=$r['moneygot']?> из <?=$r['moneyneed']?> рублей</td></tr>
        <!-- и второй - с прогрессом дела из .workprogress -->
        <?php $wwpercent = $r['workprogress']; ?>
        <tr><td><div class="workprogress"><div class="workbar" id="wba<?=$count?>"></div></div>Работа выполнена на <?=$wwpercent?> %</td></tr>
            <script type='text/javascript'>
                document.write(setprogressbar("wb<?=$count?>", <?=$wpercent?>))
                document.write(setprogressbar("wba<?=$count?>", <?=$wwpercent?>))
            </script>

        
        
        </table></td>
        <?php if (($count % 4) == 0) // дела - по четыре в ряд
        { ?>
            </tr><tr>
        <?php } 
    } ?>
</tr></table>